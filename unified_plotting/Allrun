#!/bin/bash 

./plot_study.py \
  --input path=../WindsorBody_20250806/postpro.json,times_key=TimeStep,unit=ms \
  --input path=../WindsorBody_SPUMA_cineca_v2/postpro.json,study_mode=gpu,variation_key=preconditioner,variation_map="aDIC=SPUMA: GPU (PCG solver),none=SPUMA: GPU (GAMG solver)",times_key=clockTimeDelta,unit=s \
  --input path=../WindsorBody_SPUMA_20250813/postpro.json,study_mode=gpu,cpu_cores_per_node=64,gpus_per_node=4,gpu_on=6.88,gpu_rsv=2.97216,variation_key=preconditioner,variation_map="aDIC=SPUMA: H100-GPU (PCG solver),none=SPUMA: H100-GPU (GAMG solver)",times_key=clockTimeDelta,unit=s \
  --variation-key preconditioner \
  --variation-map "FDIC=OF: CPU<br>(PCG solver),none=OF: CPU<br>(GAMG solver),BJ=OGL: CPU+GPU<br>(Ginkgo CG solver<br>+ Block Jacobi precond.),{ preconditioner Multigrid; caching 150; }=OGL: CPU+GPU<br>(Ginkgo CG solver<br>+ Multigrid precond.)" \
  --default-gpu-hr-ondemand 2.74470525 --default-cpu-core-hr-ondemand 0.086953125 \
  --default-gpu-hr-reserved 1.17175 --default-cpu-core-hr-reserved 0.03742 \
  --outdir plots \
  --outname WindsorBody
  #--cost-group "preconditioner=FDIC:cpu:0.087:0.060,preconditioner=none:cpu:0.087:0.060" \
  #--instance-cost "c8g.48xlarge:cpu:0.087:0.060,H100:gpu:3.60:2.60" \
