case:
    type: CaseOnDisk
    solver: pimpleFoam
    origin: ${{yaml.location}}/../basicSetup 
    post_build:
      - shell: getMesh.sh
      - controlDict:
           writeFormat: binary
           libs: ["libOGL.so"}
           endTime: 1.0
variation:
  - operation: refineMesh
    key: value
    values:
      [0,1,2,3]
    variation:
      - operation: fvSolution
        schema: "linear_solver/{solver}{preconditioner}{executor}"
        values:
          - set: solvers/p
            preconditioner: none
            solver: GKOCG
            executor: ${{env.GINKGO_EXECUTOR}}
          - set: solvers/p
            solver: PCG
            preconditioner: none
            executor: CPU
        variation:
          - operation: decomposePar
            schema: "decomposition_GPU/{simple/numberSubDomains}"
            values:
              - method: simple
                numberSubDomains: ${{ 1 * ${{env.NGPUS}} }}
              - method: simple
                numberSubDomains: ${{ 2 * ${{env.NGPUS}} }}
              - method: simple
                numberSubDomains: ${{ 4 * ${{env.NGPUS}} }}
            parent:
              executor: ${{env.GINKGO_EXECUTOR}}
          - operation: decomposePar
            schema: "decomposition_CPU/{simple/numberSubDomains}"
            values:
              - method: simple
                numberSubDomains: ${{ 1 * ${{env.NCPUS}} }}
              - method: simple
                numberSubDomains: ${{ 2 * ${{env.NCPUS}} }}
              - method: simple
                numberSubDomains: ${{ 4 * ${{env.NCPUS}} }}
            parent:
              executor: CPU
